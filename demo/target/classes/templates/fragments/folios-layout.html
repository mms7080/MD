<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:fragment="layout (pageTitle, activeMenu, content, css, js)">
<head>
  <meta charset="utf-8" />
  <title th:text="|kafolio â€“ ${pageTitle}|">kafolio</title>

  <meta name="_csrf" th:content="${_csrf?.token}" />
  <meta name="_csrf_header" th:content="${_csrf?.headerName}" />

  <!-- âœ… ì²« í˜ì¸íŠ¸ ì „ì— ì €ì¥ëœ í…Œë§ˆ ì ìš© (CSSë³´ë‹¤ ë¨¼ì €) -->
  <script>
    (function () {
      try {
        var saved = localStorage.getItem('theme');
        if (!saved) {
          saved = (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches)
                  ? 'light' : 'dark';
        }
        if (saved === 'light') {
          document.documentElement.setAttribute('data-theme', 'light');
        } else {
          document.documentElement.removeAttribute('data-theme');
        }
      } catch (e) {}
    })();
  </script>

  <!-- ê³µí†µ CSS -->
  <link th:href="@{/css/header.css}" rel="stylesheet" />
  <link th:href="@{/css/footer.css}" rel="stylesheet" />
  <link th:href="@{/css/users/auth-modal.css}" rel="stylesheet" />
  <link th:href="@{/css/folios/layout.css}" rel="stylesheet" />

  <!-- í˜ì´ì§€ ì „ìš© CSS ìŠ¬ë¡¯ -->
  <th:block th:replace="${css} ?: ~{}"></th:block>
</head>

<body>
  <!-- ê³µí†µ í—¤ë” -->
  <div th:replace="~{fragments/header :: header('folio')}"></div>

  <div class="folios-shell">
    <main class="folios-content" th:replace="${content}"></main>

    <aside class="folios-sidebar">
      <nav class="folios-menu">
        <a th:href="@{/folios}"        th:classappend="${activeMenu == 'list'}   ? 'is-active'">ğŸ—‚ï¸ Folios ë‘˜ëŸ¬ë³´ê¸°</a>
        <a th:href="@{/folios/write}"  th:classappend="${activeMenu == 'write'}  ? 'is-active'">âœ¨ Folio ìƒˆë¡œ ë§Œë“¤ê¸°</a>
        <a th:href="@{/folios/append}" th:classappend="${activeMenu == 'append'} ? 'is-active'">ğŸ› ï¸ í…œí”Œë¦¿ ê´€ë¦¬ (Admin)</a>
      </nav>
    </aside>
  </div>

  <!-- ê³µí†µ í‘¸í„° -->
  <div th:replace="~{fragments/footer :: footer}"></div>

  <!-- í˜ì´ì§€ ì „ìš© JS ìŠ¬ë¡¯ -->
  <th:block th:replace="${js} ?: ~{}"></th:block>
</body>
</html>
