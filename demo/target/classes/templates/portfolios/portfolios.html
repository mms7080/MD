<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
    <head>
        <meta charset="UTF-8" />
        <title
            th:text="${portfolios != null} ? portfolios.title : 'Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ ÏóÜÏùå'"
        >
            Portfolio
        </title>
        <meta name="_csrf" th:content="${_csrf.token}" />
        <meta name="_csrf_header" th:content="${_csrf.headerName}" />

        <link rel="stylesheet" href="/css/header.css" />
        <link rel="stylesheet" href="/css/portfolios/portfolios-detail.css" />
        <link rel="stylesheet" href="/css/footer.css" />
        <link rel="stylesheet" href="/css/users/auth-modal.css" />
    </head>
    <body class="portfolio-detail">
        <!-- Ìó§Îçî -->
        <div th:replace="fragments/modals :: authModals"></div>
        <div th:replace="fragments/header :: header('portfolio')"></div>

        <main class="container">
            <!-- ‚ùå Not Found -->
            <div th:if="${notFound}" class="error-box">
                <h1>Ìè¨Ìä∏Ìè¥Î¶¨Ïò§Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.</h1>
                <a href="/home">‚Üê ÌôàÏúºÎ°ú</a>
            </div>
            <div class="portfolio-header">
                <h1 class="title" th:text="${portfolios.title}">Ï†úÎ™©</h1>
                <p class="desc" th:text="|&quot;${portfolios.desc}&quot;|">ÏÑ§Î™Ö</p>
            </div>

            <!-- ‚úÖ Portfolio Content -->
            <div th:if="${portfolios != null}" class="portfolio-detail-grid">
                <!-- ÏôºÏ™Ω: Ïù¥ÎØ∏ÏßÄ -->
                <div class="gallery">
                    <!-- ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ -->
                    <figure class="main-photo">
                        <img
                            id="mainImage"
                            th:src="${portfolios.screenshots[0]}"
                            alt="ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"
                        />
                    </figure>

                    <!-- Ïç∏ÎÑ§Ïùº -->
                    <div class="thumb-list">
                        <img
                            th:each="img : ${portfolios.screenshots}"
                            th:src="${img}"
                            alt="Ïç∏ÎÑ§Ïùº"
                            onmouseover="changeMainImage(this.src)"
                        />
                    </div>
                    
                </div>
                <!-- Ïò§Î•∏Ï™Ω: Ï†ïÎ≥¥ -->
                <div class="info-box">
                    <!-- üë• ÌåÄÏõê Ï†ïÎ≥¥ -->
                    <div class="team-section">
                        <h3>ÌåÄÏõê & Ïó≠Ìï†</h3>
                        <div class="team-list">
                        <div class="team-card" th:each="member : ${portfolios.team}">
                            <div class="member-header">
                            <strong class="name" th:text="${member.name}"></strong>
                            <span class="role" th:text="|(${member.role})|"></span>
                            </div>
                            <p class="parts" th:text="${#strings.arrayJoin(member.parts, ', ')}"></p>
                        </div>
                        </div>
                    </div>
                    
 
                </div>
            </div>

                
                    <div class="meta-box">
                        
                        <!-- üè∑ ÌÉúÍ∑∏ -->
                        <div class="tags">
                            <span class="label">Tags:</span>
                            <div class="tag-wrap">
                                <a
                                    th:each="tag : ${portfolios.tags}"
                                    th:href="@{/detail(q=${tag})}"
                                    th:text="${tag}"
                                    class="tag"
                                ></a>
                            </div>
                        </div>
                        <!-- ÏïÑÏù¥ÏΩò -->
                    <aside class="summary-logo" th:if="${portfolios.icon}">
                        <figure class="logo-card" title="portfolios Logo">
                            <img
                                th:src="${portfolios.icon}"
                                th:alt="|${portfolios.title} ÏïÑÏù¥ÏΩò|"
                                loading="lazy"
                                decoding="async"
                            />
                        </figure>
                    </aside>
                        <!-- Links -->
                        <p>
                            <span class="label">Links :</span>
                            <a
                                th:href="${portfolios.link}"
                                target="_blank"
                                th:text="${portfolios.link}"
                                class="custom-link"
                            ></a>
                        </p>

                        <p>
                            <span class="label">Views :</span>
                            <span id="viewCount">0</span>
                        </p>
                        <!-- ÌèâÍ∑† Î≥ÑÏ†ê ÏöîÏïΩÏùÑ Like ÏòÅÏó≠Ï≤òÎüº ÌëúÏãú -->
                        <div class="like-wrap">
                            <span class="label">Likes:</span>
                            <div class="stars readonly" id="avgStars" aria-label="ÌèâÍ∑† Î≥ÑÏ†ê"></div>
                            <span class="star-symbol">‚≠ê</span>
                            <span id="avgScore">0.0</span>
                            <span class="count">(<span id="ratingCount">0</span>)</span>
                        </div>
                        

                        <!-- Îã§Ïö¥Î°úÎìú -->
                        <p>
                            <span class="label">Download:</span>
                            <a
                                th:href="${portfolios.download}"
                                download
                                th:text="${portfolios.download}"
                                class="download-link"
                            ></a>
                        </p>

                        
                    </div>
            <div class="comment-section">
                <h2>ÎåìÍ∏Ä</h2>

                <!-- ÌèâÍ∑† Î≥ÑÏ†ê(Î™®ÎëêÏóêÍ≤å Î≥¥ÏûÑ) -->
                <div class="rating-summary">
                    <div
                        class="stars readonly"
                        id="avgStars"
                        aria-label="ÌèâÍ∑† Î≥ÑÏ†ê"
                    ></div>
                </div>

                <!-- Î°úÍ∑∏Ïù∏ ÏÇ¨Ïö©Ïûê Ï†ÑÏö©: Î≥ÑÏ†ê + ÎåìÍ∏Ä Ìèº -->
                <div sec:authorize="isAuthenticated()">
                    <div class="rate-input">
                        <label class="rate-label">ÎÇ¥ Î≥ÑÏ†ê: </label>
                        <div
                            id="writeStars"
                            class="stars write"
                            role="radiogroup"
                            aria-label="Î≥ÑÏ†ê ÏÑ†ÌÉù(1~5)"
                        >
                            <!-- JSÍ∞Ä 5Í∞ú Î≥ÑÏùÑ ÎßåÎì§Ïñ¥Ï§çÎãàÎã§ -->
                        </div>
                        <span id="myScoreText">0/5</span>
                    </div>

                    <form id="commentForm">
                        <textarea
                            id="commentContent"
                            placeholder="ÎåìÍ∏ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."
                            rows="4"
                            required
                        ></textarea>
                        <button type="submit">Îì±Î°ù</button>
                    </form>
                </div>

                <!-- ÎπÑÌöåÏõê ÏïàÎÇ¥ -->
                <div sec:authorize="isAnonymous()">
                    <p class="muted">
                        Î°úÍ∑∏Ïù∏ ÌõÑ ÎåìÍ∏Ä/Î≥ÑÏ†êÏùÑ ÎÇ®Í∏∏ Ïàò ÏûàÏäµÎãàÎã§.
                        <a href="/signin">Î°úÍ∑∏Ïù∏</a>
                    </p>
                </div>

                <!-- ÎåìÍ∏Ä Î¶¨Ïä§Ìä∏ -->
                <!-- ÎåìÍ∏Ä Î¶¨Ïä§Ìä∏ -->
                <div id="commentList" class="comments">
                    <!-- ÏòàÏãú ÎåìÍ∏Ä (JSÎ°ú ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞Ä ÏòàÏ†ï) -->
                    <div class="comment">
                        <div class="meta">
                            <span class="author">ÏùµÎ™Ö</span> ¬∑ <span class="date">2025-09-06</span>
                        </div>
                        <div class="stars readonly">
                            ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ
                        </div>
                        <p class="content">ÍπîÎÅîÌïú ÎîîÏûêÏù∏Ïù¥ÎÑ§Ïöî</p>
                    </div>

                    <div class="comment">
                        <div class="meta">
                            <span class="author">ÏùµÎ™Ö</span> ¬∑ <span class="date">2025-09-12</span>
                        </div>
                        <div class="stars readonly">
                            ‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ
                        </div>
                        <p class="content">ÏïÑÏâ¨Ïö¥ Î∂ÄÎ∂ÑÏù¥ ÎßéÏßÄÎßå Í∑∏ÎûòÎèÑ Í¥úÏ∞ÆÎÑ§Ïöî</p>
                    </div>

                </div>

            </div>

            
        </div>
        <!-- üîó JavaScript -->
        <script>
            function changeMainImage(src) {
                document.getElementById("mainImage").src = src;
            }
        </script>
        <script src="/js/portfolios/portfolios-detail.js"></script>
        <div th:replace="fragments/footer :: footer"></div>
    </body>
</html>
