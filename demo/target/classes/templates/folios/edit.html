<!DOCTYPE html>
<html lang="ko" th:replace="~{fragments/folios-layout :: layout(
    pageTitle = 'Folio 편집',
    activeMenu = 'write',
    css = ~{::#edit-css},
    js = ~{::#edit-js},
    content = ~{::#folios-edit-content}
)}">
<head>
    <th:block id="edit-css">
        <link th:href="@{/css/folios/edit.css}" rel="stylesheet" />
    </th:block>
</head>
<body>
    <div id="folios-edit-content">
        <div class="edit-header">
            <h1>나의 Folio 만들기</h1>
            <p>자신을 멋지게 표현하고, 참여했던 프로젝트를 연결해보세요.</p>
        </div>

        <div class="edit-container">
            <aside class="preview-pane">
                <div class="preview-card">
                    <div class="preview-profile-pic" id="preview-profile-pic"></div>
                    <h2 id="preview-name" th:text="${currentUser.name}">이름</h2>
                    <p id="preview-job">희망 직무</p>
                    <hr class="divider" />
                     <div class="preview-info">
                        <span class="icon">📧</span>
                        <span id="preview-email" th:text="${currentUser.email}">이메일</span>
                    </div>
                    <div class="preview-info skills">
                        <span class="icon">🔧</span>
                        <div class="tags" id="preview-skills"></div>
                    </div>
                </div>
            </aside>

            <main class="form-pane">
                <form id="folio-edit-form" class="edit-form">
                    <div class="form-section">
                        <label>이름</label>
                        <input type="text" th:value="${currentUser.name}" readonly disabled>
                    </div>
                    <div class="form-section">
                        <label>이메일</label>
                        <input type="email" th:value="${currentUser.email}" readonly disabled>
                    </div>

                    <div class="form-section">
                        <label for="folio-job">희망 직무 <span class="req">*</span></label>
                        <input type="text" id="folio-job" placeholder="예: 백엔드 개발자" required>
                    </div>
                    <div class="form-section">
                        <label for="skills-input">기술 스택 <span class="req">*</span></label>
                        <div id="skills-input-wrapper"></div>
                    </div>
                    <div class="form-section">
                        <label for="folio-introduction">자기소개</label>
                        <textarea id="folio-introduction" rows="6" placeholder="자신을 자유롭게 소개해 주세요."></textarea>
                    </div>
                    <div class="form-section">
                        <label>대표 이미지 및 사진</label>
                        <div class="upload-area">
                            <label for="photos-input" class="custom-file-uploader">
                                <span class="file-icon">+</span>
                                <span class="file-text">사진 추가</span>
                            </label>
                            <input type="file" id="photos-input" multiple accept="image/*" style="display: none;">
                            <div id="image-preview-container"></div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <label>참여 포트폴리오 연결</label>
                        <div class="project-selector">
                            <label class="checkbox-item" th:each="p : ${allPortfolios}">
                                <input type="checkbox" name="projectIds" th:value="${p.portfolioId}">
                                <span th:text="${p.title}">포트폴리오 제목</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-actions">
                        <a th:href="@{/folios}" class="btn-cancel">취소</a>
                        <button type="submit" class="btn-submit">저장하기</button>
                    </div>
                </form>
            </main>
        </div>
    </div>
    <th:block id="edit-js">
        <script th:src="@{/js/folios/edit.js}"></script>
    </th:block>
</body>
</html>