<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>kafolio â€“ Folios</title>

    <!-- ê³µí†µ ìŠ¤íƒ€ì¼ -->
    <link th:href="@{/css/header.css}" rel="stylesheet" />
    <link th:href="@{/css/footer.css}" rel="stylesheet" />
    <link th:href="@{/css/users/auth-modal.css}" rel="stylesheet" />

    <!-- í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ -->
    <link th:href="@{/css/folios/list.css}" rel="stylesheet" />
  </head>

  <body>
    <!-- ê³µí†µ í—¤ë”(folios ì „ìš©) -->
    <div th:replace="fragments/header :: header('folio')"></div>

    <main id="page-content" class="dev-container">
      <!-- ğŸ”§ ê²€ìƒ‰ ì œê±°, ì •ë ¬ë§Œ ìœ ì§€ -->
      <section class="folios-toolbar" aria-label="ì •ë ¬">
        <div class="folios-right">
          <label for="sort" class="sr-only">ì •ë ¬</label>
          <select id="sort" name="sort" th:value="${param.sort}">
            <option value="recent"  th:selected="${param.sort}=='recent'">ìµœì‹ ìˆœ</option>
            <option value="popular" th:selected="${param.sort}=='popular'">ì¸ê¸°ìˆœ</option>
            <option value="rating"  th:selected="${param.sort}=='rating'">í‰ì ìˆœ</option>
          </select>
        </div>
      </section>

      <h1 class="folios-title">Folio ë‘˜ëŸ¬ë³´ê¸°</h1>

      <div id="folio-grid" class="grid">
        <p class="loading-message muted">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p>
      </div>

      <!-- ì„œë²„ í˜ì´ì§• ì‚¬ìš©í•˜ëŠ” ê²½ìš° -->
      <nav class="pagination" th:if="${page != null}">
        <a class="page-btn" th:classappend="${page.number==0} ? ' disabled'"
           th:href="@{|/folios?page=${page.number-1}|}">ì´ì „</a>
        <span class="page-index">
          <b th:text="${page.number+1}">1</b> /
          <span th:text="${page.totalPages}">1</span>
        </span>
        <a class="page-btn" th:classappend="${page.number+1 >= page.totalPages} ? ' disabled'"
           th:href="@{|/folios?page=${page.number+1}|}">ë‹¤ìŒ</a>
      </nav>
    </main>

    <!-- ê³µí†µ í‘¸í„° -->
    <div th:replace="fragments/footer :: footer"></div>

    <!-- ì „ì—­ ìŠ¤í¬ë¦½íŠ¸(í…Œë§ˆ ìœ ì§€) -->
     <!-- <script src="/js/theme.js"></script> -->
    <script th:src="@{/js/theme.js}"></script>

    <!-- ì •ë ¬ ë™ì‘: ë‹¤ë¥¸ íŒŒë¼ë¯¸í„°ëŠ” ìœ ì§€, pageëŠ” ì´ˆê¸°í™” -->
    <script>
      (function(){
        var sel = document.getElementById('sort');
        if(!sel) return;
        sel.addEventListener('change', function(){
          var params = new URLSearchParams(location.search);
          params.set('sort', this.value);
          params.delete('q');     // ê²€ìƒ‰ ì œê±°
          params.delete('page');  // ì •ë ¬ ë°”ê¾¸ë©´ í˜ì´ì§€ 1ë¡œ
          var s = params.toString();
          location.search = s ? ('?' + s) : '';
        });
      })();
    </script>

    <!-- í˜ì´ì§€ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ -->
    <script th:src="@{/js/folios/list.js}"></script>
  </body>
</html>
