<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title th:text="${folio.title} ?: 'Folio 상세'">Folio 상세</title>
        <link rel="stylesheet" th:href="@{/css/folios/detail.css}" />
    </head>
    <body>
        <main class="fd-wrap">
            <header class="fd-head">
                <h1 class="fd-title" th:text="${folio.title}">제목 없음</h1>
                <div class="fd-meta">
                    <span
                        th:text="${#temporals.format(folio.updatedAt, 'yyyy.MM.dd HH:mm')}"
                        >-</span
                    >
                    <span class="dot">·</span>
                    <span
                        th:text="${folio.user != null ? folio.user.name : '익명'}"
                        >작성자</span
                    >
                    <span
                        class="fd-badge"
                        th:if="${isOwner and folio.status.name() == 'DRAFT'}"
                        >DRAFT</span
                    >
                </div>
            </header>

            <!-- 1) 사진이 하나라도 있으면 세로로 렌더 -->
            <section
                class="fd-body"
                th:if="${folio.photos != null and !#lists.isEmpty(folio.photos)}"
            >
                <div class="fd-stack">
                    <figure class="fd-slide" th:each="img : ${folio.photos}">
                        <img
                            th:src="${img}"
                            alt="folio slide"
                            loading="lazy"
                            decoding="async"
                        />
                    </figure>
                </div>
            </section>

            <!-- 2) 사진은 비었지만 썸네일이 있으면 썸네일은 보여주기 -->
            <section
                class="fd-body"
                th:if="${(folio.photos == null or #lists.isEmpty(folio.photos)) and (folio.thumbnail != null and !#strings.isEmpty(folio.thumbnail))}"
            >
                <div class="fd-stack">
                    <figure class="fd-slide">
                        <img
                            th:src="${folio.thumbnail}"
                            alt="thumbnail"
                            loading="lazy"
                            decoding="async"
                        />
                    </figure>
                </div>
            </section>

            <!-- 3) 진짜 아무것도 없으면 안내 -->
            <section
                class="fd-empty"
                th:if="${(folio.photos == null or #lists.isEmpty(folio.photos)) and (folio.thumbnail == null or #strings.isEmpty(folio.thumbnail))}"
            >
                아직 등록된 이미지가 없습니다.
            </section>
        </main>

        <!-- 상세 페이지는 별도 JS 불필요. (기존 fetch 기반 detail.js는 사용 안 함) -->
    </body>
</html>
