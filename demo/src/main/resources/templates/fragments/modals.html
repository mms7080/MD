<th:block xmlns:th="http://www.thymeleaf.org" th:fragment="authModals">
  <div class="modal-root">
    <!-- CSS-only 토글 라디오 (기본 닫힘) -->
    <input type="radio" name="modal" id="modal-none" hidden checked>
    <input type="radio" name="modal" id="modal-signin" hidden>
    <input type="radio" name="modal" id="modal-signup" hidden>

    <!-- <script th:src="@{/js/users/sign.js}" defer></script> -->
    <script src="/js/users/sign.js" defer></script>

    <!-- 로그인 모달 -->
    <div class="kf-auth-modal signin" role="dialog" aria-modal="true" aria-labelledby="signin-title">
      <label class="kf-auth__overlay" for="modal-none"></label>
      <div class="kf-auth__content">
        <label class="kf-auth__close" for="modal-none" aria-label="닫기">×</label>

        <div class="kf-auth__grid">
          <!-- 좌측 브랜딩 -->
          <aside class="auth-left">
            <div class="kf-brand">
              <div class="kf-brand__top">
                <span class="kf-wordmark">kafolio<span class="star">✶</span></span>
                <!-- <span class="kf-badge">NEW</span> -->
              </div>

              <h2 class="kf-headline">
                포트폴리오가 <em>작품</em>이 되다
              </h2>
              <p class="kf-sub">템플릿 · 통계 · 커스텀 링크를 한 곳에서</p>

              <!-- 시각 카드(겹쳐진 스크린샷) -->
              <div class="kf-shots">
                <figure class="shot s1">
                  <img
                    src="https://kafolio.kr/static/requests/2025/7/9/boards/ZWY1ZDE0NjY2MjM0Yzg5MDY0MDAzZWVkZTM5Y2E1ZWJjNmYyMDg0YjI0MDc1ODY5OTg5OTljMTY1YTBlODI4Nw==.png"
                    alt="템플릿 미리보기" />
                </figure>
                <figure class="shot s2">
                  <img
                    src="https://kafolio.kr/static/requests/2025/7/9/boards/ZTI0YmNkZTMxMjIzY2VkNmRlYmFkZDYyY2M4M2Q2NDJlNTE2MTdmZGUzZDE3MWVkMmE1ZTMxYTc0YjBmNWQ4Yw==.png"
                    alt="대시보드 미리보기" />
                </figure>
              </div>

              <!-- 기능 칩 -->
              <div class="kf-chips">
                <span class="chip">🧩 템플릿 12종+</span>
                <span class="chip">📊 조회/좋아요 통계</span>
                <span class="chip">🔗 커스텀 링크</span>
                <span class="chip">⚡ 초간편 배포</span>
              </div>
            </div>
          </aside>

          <!-- <aside class="auth-left">
            <div class="auth-left__inner">
              <p class="auth-welcome">Welc☺me!</p>
              <div class="brand-title">kafolio</div>
              <p class="brand-sub">portfolio gallery</p>
              <p class="auth-cta">Not a member yet?
                <label class="link" for="modal-signup">Register now</label>
              </p>
            </div>
          </aside> -->

          <section class="auth-right">
            <h3 id="signin-title" class="auth-title">로그인</h3>

            <form class="auth-form" th:action="@{/signin}" method="post" aria-label="로그인 폼">
              <label class="auth-field">
                <!-- <span class="auth-label">아이디</span> -->
                <input name="username" type="text" placeholder="아이디" required autocomplete="username">
              </label>

              <label class="auth-field">
                <!-- <span class="auth-label">비밀번호</span> -->
                <input name="password" type="password" placeholder="비밀번호" required autocomplete="current-password">
              </label>

              <label class="auth-keep">
                <input type="checkbox" name="remember-me">
                <span>아이디 저장</span>
              </label>

              <!-- CSRF -->
              <input type="hidden" th:if="${_csrf != null}" th:name="${_csrf.parameterName}"
                th:value="${_csrf.token}" />

              <button type="submit" class="auth-btn">로그인</button>

              <div class="auth-row">
                <label for="modal-signup" class="link small" style="cursor:pointer">회원가입</label>
                <a class="link small" th:href="@{/forgot}">비밀번호 찾기</a>
              </div>


            </form>
          </section>
        </div>
      </div>
    </div>

    <!-- 회원가입 모달 -->
    <div class="kf-auth-modal signup" role="dialog" aria-modal="true" aria-labelledby="signup-title">
      <label class="kf-auth__overlay" for="modal-none"></label>
      <div class="kf-auth__content">
        <label class="kf-auth__close" for="modal-none" aria-label="닫기">×</label>

        <div class="kf-auth__grid">
          <aside class="auth-left">
            <div class="kf-brand">
              <div class="kf-brand__top">
                <span class="kf-wordmark">kafolio<span class="star">✶</span></span>
                <!-- <span class="kf-badge">NEW</span> -->
              </div>

              <h2 class="kf-headline">
                포트폴리오가 <em>작품</em>이 되다
              </h2>
              <p class="kf-sub">템플릿 · 통계 · 커스텀 링크를 한 곳에서</p>

              <!-- 시각 카드(겹쳐진 스크린샷) -->
              <div class="kf-shots">
                <figure class="shot s1">
                  <img
                    src="https://kafolio.kr/static/requests/2025/7/9/boards/ZWY1ZDE0NjY2MjM0Yzg5MDY0MDAzZWVkZTM5Y2E1ZWJjNmYyMDg0YjI0MDc1ODY5OTg5OTljMTY1YTBlODI4Nw==.png"
                    alt="템플릿 미리보기" />
                </figure>
                <figure class="shot s2">
                  <img
                    src="https://kafolio.kr/static/requests/2025/7/9/boards/ZTI0YmNkZTMxMjIzY2VkNmRlYmFkZDYyY2M4M2Q2NDJlNTE2MTdmZGUzZDE3MWVkMmE1ZTMxYTc0YjBmNWQ4Yw==.png"
                    alt="대시보드 미리보기" />
                </figure>
              </div>

              <!-- 기능 칩 -->
              <div class="kf-chips">
                <span class="chip">🧩 템플릿 12종+</span>
                <span class="chip">📊 조회/좋아요 통계</span>
                <span class="chip">🔗 커스텀 링크</span>
                <span class="chip">⚡ 초간편 배포</span>
              </div>
            </div>
          </aside>
          <!-- <aside class="auth-left">
            <div class="auth-left__inner">
              <p class="auth-welcome">Join us</p>
              <div class="brand-title">kafolio</div>
              <p class="brand-sub">portfolio gallery</p>
              <p class="auth-cta">Already have an account?
                <label class="link" for="modal-signin">Log in</label>
              </p>
            </div>
          </aside> -->

          <section class="auth-right">
            <h3 id="signup-title" class="auth-title">회원가입</h3>

            <form class="auth-form" th:action="@{/signup}" method="post" aria-label="회원가입 폼" novalidate>
              <!-- 아이디 + 중복확인 -->
              <label class="auth-field">
                <div class="label-row">
                  <span class="auth-label">아이디</span>
                  <small id="usernameStatus" class="note-banner inline" hidden aria-live="polite"></small>
                </div>
                <div class="row-2 row-id">
                  <input id="username" name="username" type="text" placeholder="영문/숫자 4~16자" required
                    autocomplete="username">
                  <button type="button" class="btn" id="btnCheckId">중복 확인</button>
                </div>
              </label>

              <!-- 비밀번호 / 비밀번호 확인 -->
              <div class="row-2">
                <label class="auth-field">
                  <span class="auth-label">비밀번호</span>
                  <input name="password" id="password" type="password" placeholder="10자 이상" required
                    autocomplete="new-password">
                </label>
                <label class="auth-field">
                  <span class="auth-label">비밀번호 확인</span>
                  <input name="confirmPassword" id="confirmPassword" type="password" placeholder="비밀번호 재입력" required
                    autocomplete="new-password">
                </label>
              </div>
              <div>
                <span id="password-status"></span>
              </div>

              <!-- 이름 -->
              <label class="auth-field">
                <span class="auth-label">이름</span>
                <input name="name" type="text" placeholder="홍길동" required>
              </label>

              <!-- 이메일 중복 체크 -->
              <div class="auth-field" id="emailCombo">
                <div class="label-row">
                  <span class="auth-label">이메일 <span class="req" aria-hidden="true">*</span></span>
                  <small id="ajaxNotice" class="note-banner inline" hidden aria-live="polite"></small>
                </div>

                <div class="email-combo email-combo--widebtn">
                  <input id="emailLocal" name="emailLocal" type="text" placeholder="아이디" autocomplete="off" />
                  <span class="at">@</span>

                  <div class="domain-wrap">
                    <select id="emailDomain" name="emailDomainSel" aria-label="도메인 선택">
                      <option value="gmail.com">gmail.com</option>
                      <option value="naver.com">naver.com</option>
                      <option value="daum.net">daum.net</option>
                      <option value="kakao.com">kakao.com</option>
                      <option value="__custom__">직접 입력</option>
                    </select>
                    <input id="emailDomainCustom" name="emailDomainCustom" type="text" placeholder="example.com"
                      class="hidden" />
                  </div>

                  <!-- 실제 전송될 이메일 값 -->
                  <input id="email" name="email" type="hidden" />

                  <!-- 발송 버튼 -->
                  <button type="button" class="btn small" id="btnCheckEmail">중복 확인</button>
                </div>

                <!-- <small class="note-banner" id="ajaxNotice" hidden aria-live="polite"></small> -->
              </div>

              <!-- 성별 + 생년월일 -->
              <div class="row-2">
                <fieldset class="auth-field">
                  <legend class="auth-label">성별</legend>
                  <div class="radios">
                    <label class="radio"><input type="radio" name="gender" value="M" required><span>남자</span></label>
                    <label class="radio"><input type="radio" name="gender" value="W" required><span>여자</span></label>
                  </div>
                </fieldset>

                <label class="auth-field">
                  <span class="auth-label">생년월일</span>
                  <input id="birth" name="birth" type="date" placeholder="YYYY-MM-DD" required>
                </label>
              </div>

              <!-- CSRF -->
              <input type="hidden" th:if="${_csrf != null}" th:name="${_csrf.parameterName}"
                th:value="${_csrf.token}" />

              <button type="submit" class="auth-btn">회원가입</button>

              <div class="auth-row">
                <!-- <label class="link small" for="modal-signin" >로그인</label> -->
              </div>
            </form>
          </section>
        </div>
      </div>
    </div>
  </div>
</th:block>