<!-- templates/fragments/header.html -->
<!DOCTYPE html>
<html
    xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="https://www.thymeleaf.org/extras/spring-security"
>
    <th:block th:fragment="header">
        <header class="kf-header">
            <div class="kf-header__inner">
                <!-- 왼쪽: 로고 + 내비 -->
                <div class="kf-header__left">
                    <a class="kf-logo" th:href="@{/}" aria-label="kafolio 홈">
                        kafolio<span class="kf-star">✶</span>
                    </a>

                    <nav class="kf-nav" aria-label="주요 메뉴">
                        <ul>
                            <li><a th:href="@{/detail}">portfolio</a></li>
                            <li><a th:href="@{/folios}">folio</a></li>
                            <li><a th:href="@{/notice}">공지사항</a></li>
                        </ul>
                    </nav>
                </div>

                <!-- 오른쪽: 테마 토글 + 인증 메뉴 -->
                <div class="kf-header__right">
                    <!-- Theme toggle (CSS-only) -->
                    <input
                        id="theme-toggle"
                        type="checkbox"
                        hidden
                        aria-hidden="true"
                    />
                    <label
                        class="kf-iconbtn"
                        for="theme-toggle"
                        aria-label="다크/라이트 모드 전환"
                    >
                        <svg
                            class="kf-icon"
                            viewBox="0 0 24 24"
                            aria-hidden="true"
                        >
                            <path
                                d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 1 0 9.79 9.79z"
                            />
                        </svg>
                    </label>

                    <!-- 인증 메뉴 -->
                    <nav class="kf-auth" aria-label="인증 메뉴">
                        <!-- 비로그인 상태: 모달 토글 (링크 구분선 없이) -->
                        <div sec:authorize="isAnonymous()">
                            <label
                                for="modal-signin"
                                class="kf-link"
                                style="cursor: pointer"
                                >로그인</label
                            >
                            <label
                                for="modal-signup"
                                class="kf-link"
                                style="cursor: pointer"
                                >회원가입</label
                            >
                        </div>

                        <!-- 로그인 상태 (일반 사용자) -->
                        <div
                            sec:authorize="isAuthenticated() and !hasRole('ADMIN')"
                        >
                            <a class="kf-link" th:href="@{/mypage}"
                                >마이페이지</a
                            >
                            <form
                                th:action="@{/logout}"
                                method="post"
                                th:csrf
                                style="display: inline"
                            >
                                <button
                                    type="submit"
                                    class="kf-link"
                                    style="
                                        background: none;
                                        border: none;
                                        padding: 0;
                                        cursor: pointer;
                                    "
                                >
                                    로그아웃
                                </button>
                            </form>
                        </div>

                        <!-- 로그인 상태 (관리자) -->
                        <div sec:authorize="hasRole('ADMIN')">
                            <a class="kf-link" th:href="@{/admin}"
                                >관리자페이지</a
                            >
                            <form
                                th:action="@{/logout}"
                                method="post"
                                th:csrf
                                style="display: inline"
                            >
                                <button
                                    type="submit"
                                    class="kf-link"
                                    style="
                                        background: none;
                                        border: none;
                                        padding: 0;
                                        cursor: pointer;
                                    "
                                >
                                    로그아웃
                                </button>
                            </form>
                        </div>
                    </nav>
                </div>
            </div>
        </header>
    </th:block>
</html>
