<!DOCTYPE html>
<html
    lang="ko"
    xmlns:th="http://www.thymeleaf.org"
    th:replace="~{fragments/layout :: layout(
    pageTitle = ${folio.title} ?: 'Folio ÏÉÅÏÑ∏',
    headerKey  = 'folio',
    activeMenu = 'detail',
    css = ~{::#detail-css},
    js  = ~{::#detail-js},
    content = ~{::#folio-detail}
  )}"
>
    <head>
        <!-- ÌéòÏù¥ÏßÄ Ï†ÑÏö© CSS -->
        <th:block id="detail-css">
            <link rel="stylesheet" th:href="@{/css/folios/detail.css}" />
        </th:block>

        <th:block id="detail-js">
            <script th:src="@{/js/folios/detail.js}" defer></script>
        </th:block>
    </head>

    <body>
        <section id="folio-detail" class="fd-wrap">
            <header
                class="fd-head"
                th:with="
          intro=${detail != null && detail.state != null ? detail.state['intro'] : null},
          titleText=${(folio.title != null && !#strings.isEmpty(folio.title))
                       ? folio.title
                       : 'Ï†úÎ™© ÏóÜÏùå'},
          authorName=${(folio.user != null && !#strings.isEmpty(folio.user.name))
                        ? folio.user.name
                        : (intro != null && !#strings.isEmpty(intro['name']))
                           ? intro['name']
                           : 'ÏùµÎ™Ö'},
          avatarUrl=${(intro != null && !#strings.isEmpty(intro['avatarUrl']))
                       ? intro['avatarUrl']
                       : '/images/avatar-default.png'}
        "
            >
                <div class="fd-head-top">
                    <img
                        class="fd-avatar"
                        th:src="${avatarUrl}"
                        alt="author avatar"
                        loading="lazy"
                        decoding="async"
                    />
                    <div class="fd-head-texts">
                        <h1 class="fd-title" th:text="${titleText}">
                            Ï†úÎ™© ÏóÜÏùå
                        </h1>
                        <div class="fd-meta">
                            <span th:text="${authorName}">ÏûëÏÑ±Ïûê</span>
                            <span
                                class="fd-badge"
                                th:if="${isOwner and folio.status != null and folio.status.name() == 'DRAFT'}"
                                >DRAFT</span
                            >
                        </div>
                    </div>
                </div>
            </header>

            <!-- 1) ÏÇ¨ÏßÑÏù¥ ÌïòÎÇòÎùºÎèÑ ÏûàÏúºÎ©¥ ÏÑ∏Î°ú Î†åÎçî -->
            <section
                class="fd-body"
                th:if="${folio.photos != null and !#lists.isEmpty(folio.photos)}"
            >
                <div class="fd-stack">
                    <figure class="fd-slide" th:each="img : ${folio.photos}">
                        <img
                            th:src="${img}"
                            alt="folio slide"
                            loading="lazy"
                            decoding="async"
                        />
                    </figure>
                </div>
            </section>

            <!-- 2) ÏÇ¨ÏßÑÏùÄ ÎπÑÏóàÏßÄÎßå Ïç∏ÎÑ§ÏùºÏù¥ ÏûàÏúºÎ©¥ Ïç∏ÎÑ§Ïùº ÌëúÏãú -->
            <section
                class="fd-body"
                th:if="${(folio.photos == null or #lists.isEmpty(folio.photos)) 
                     and (folio.thumbnail != null and !#strings.isEmpty(folio.thumbnail))}"
            >
                <div class="fd-stack">
                    <figure class="fd-slide">
                        <img
                            th:src="${folio.thumbnail}"
                            alt="thumbnail"
                            loading="lazy"
                            decoding="async"
                        />
                    </figure>
                </div>
            </section>

            <!-- 3) ÏïÑÎ¨¥Í≤ÉÎèÑ ÏóÜÏúºÎ©¥ ÏïàÎÇ¥ -->
            <section
                class="fd-empty"
                th:if="${(folio.photos == null or #lists.isEmpty(folio.photos)) 
                     and (folio.thumbnail == null or #strings.isEmpty(folio.thumbnail))}"
            >
                ÏïÑÏßÅ Îì±Î°ùÎêú Ïù¥ÎØ∏ÏßÄÍ∞Ä ÏóÜÏäµÎãàÎã§.
            </section>
            <!-- Ïò§Î•∏Ï™Ω Ïä§Ìã∞ÌÇ§ Ïï°ÏÖòÎ∞î -->
            <!-- ÏïÑÏù¥ÏΩò ÎÇòÏ§ëÏóê Î∞îÍøÄ Í±∞ÏûÑ -->
            <aside
                class="fd-actions"
                aria-label="Îπ†Î•∏ ÎèôÏûë"
                th:attr="data-folio-id=${folio.id}"
            >
                <div class="fd-act">
                    <button
                        type="button"
                        class="fd-action"
                        data-action="share"
                        title="Í≥µÏú† (URL Î≥µÏÇ¨)"
                    >
                        <span class="fd-ico">üîó</span>
                    </button>
                    <div class="fd-cap">Í≥µÏú†</div>
                </div>

                <div class="fd-act">
                    <button
                        type="button"
                        class="fd-action"
                        data-action="save"
                        title="Ï†ÄÏû• (PDFÎ°ú Ïù∏ÏáÑ)"
                    >
                        <span class="fd-ico">üñ®Ô∏è</span>
                    </button>
                    <div class="fd-cap">Ï†ÄÏû•</div>
                </div>

                <div class="fd-act">
                    <button
                        type="button"
                        class="fd-action fd-top"
                        data-action="top"
                        title="Îß® ÏúÑÎ°ú"
                    >
                        <span class="fd-ico">‚¨ÜÔ∏è</span>
                    </button>
                    <div class="fd-cap">Îß® ÏúÑÎ°ú</div>
                </div>
            </aside>
        </section>
    </body>
</html>
