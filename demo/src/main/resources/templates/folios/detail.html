<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8" />
        <title>Folio 상세</title>
        <meta name="_folio_id" th:content="${folioId}" />
        <style>
            .wrap {
                max-width: 900px;
                margin: 40px auto;
                padding: 0 16px;
            }
            .hero {
                margin-bottom: 16px;
            }
            .slides img {
                width: 100%;
                display: block;
                margin: 20px 0;
                border-radius: 12px;
                background: #eee;
            }
            .meta {
                color: #777;
            }
        </style>
    </head>
    <body>
        <div th:replace="fragments/header :: header('folios')"></div>

        <main class="wrap">
            <h1 id="title">제목</h1>
            <div class="meta" id="meta"></div>
            <article class="slides" id="slides"></article>
        </main>

        <script>
            const id = document.querySelector('meta[name="_folio_id"]').content;
            const titleEl = document.getElementById("title");
            const metaEl = document.getElementById("meta");
            const slidesEl = document.getElementById("slides");

            async function load() {
                const res = await fetch(`/api/folios/${id}`);
                if (!res.ok) {
                    titleEl.textContent = "존재하지 않는 Folio";
                    return;
                }
                const d = await res.json();
                titleEl.textContent = d.title || "Untitled";
                metaEl.textContent = (d.createdAt || "").slice(0, 10);
                slidesEl.innerHTML = "";
                (d.photos || []).forEach((url) => {
                    const img = new Image();
                    img.src = url;
                    img.alt = "slide";
                    slidesEl.appendChild(img);
                });
            }
            load();
        </script>
    </body>
</html>
